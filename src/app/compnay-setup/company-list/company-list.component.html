<div class="main-content">
    <div class="row gx-3  align-items-center p-2 rounded-2 mt-3">
        <div class="col">
            <h2 class="fw-bold"> <i class="bi bi-gear me-2 "></i> Company List</h2>
        </div>
        <div class="company-setup">
            <div class="container-fluid ">

                <div class="row">
                    <div class="col text-end p-0">
                        <!-- Button trigger modal -->
                        <button type="button" class="btn text-white  add_company  mb-3"
                            style="background-color: #3674B5;" data-bs-toggle="modal" data-bs-target="#exampleModal">
                            <i class="bi bi-plus-lg me-2"></i> Add Company
                        </button>

                        <!-- Modal -->
                        <div class="modal fade modal-lg text-left" id="exampleModal" tabindex="-1"
                            aria-labelledby="exampleModalLabel">
                            <div class="modal-dialog modal-xl  modal-dialog-centered">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLabel">Add Company</h5>
                                        <button type="button text-white" class="btn-close" data-bs-dismiss="modal"
                                            aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body text-left">
                                        <!-- <div class="row">
                                                    <div class="col mb-3">
                                                        * Please Fill All Required Fields.
                                                    </div>
                                                </div> -->
                                        <form [formGroup]="companyForm" (ngSubmit)="addCompany()">
                                            <div class="row">

                                                <!-- Company Name -->
                                                <div class="col-md-6 mb-3">
                                                    <label for="companyName">Company Name <span
                                                            class="text-danger">*</span></label>
                                                    <div class="position-relative">
                                                        <input type="text" id="companyName" class="form-control"
                                                            formControlName="companyName"
                                                            placeholder="Enter Company Name" [max]="today"
                                                            [ngClass]="{'is-invalid': isSubmitted && companyForm.get('companyName')?.invalid}">
                                                        <div class="invalid-feedback"
                                                            *ngIf="isSubmitted && companyForm.get('companyName')?.errors?.['pattern']">
                                                            Cannot contain special characters or numbers.
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Company Logo -->
                                                <div class="col-md-3 mb-3">
                                                    <label for="companyLogo">Company Logo <span
                                                            class="text-danger">*</span></label>
                                                    <div class="position-relative">
                                                        <input type="file" class="form-control" id="companyLogo"
                                                            formControlName="companyLogo"
                                                            (change)="onFileSelected($event)" accept="image/*"
                                                            [ngClass]="{'is-invalid': isSubmitted && !selectedLogoFile}">
                                                        <div class="invalid-feedback"
                                                            *ngIf="isSubmitted && !selectedLogoFile">
                                                            Company Logo is required.
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md mb-3">
                                                    <label for="incDate">Master Company ? <span
                                                            class="text-danger">*</span></label>
                                                    <div class="position-relative d-flex gap-4">
                                                        <div class="d-flex align-items-center gap-1">
                                                            <input type="radio" id="html" name="fav_language"
                                                                value="yes" formControlName="radioChoice">
                                                              <label for="html" class="m-0">Yes</label>
                                                        </div>
                                                        <div class="d-flex align-items-center gap-1">
                                                              <input type="radio" id="css" name="fav_language"
                                                                value="no" formControlName="radioChoice">
                                                              <label for="css" class="m-0">No</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row my-3">

                                                <!-- Incorporation Date -->
                                                <div class="col-md-4 mb-3">
                                                    <label for="incDate">Master Company List <span
                                                            class="text-danger">*</span></label>
                                                    <div class="position-relative">
                                                        <select name="" formControlName="masterCompanyList"
                                                            (change)="onMasterCompanyChange($event)"
                                                            class="form-control" id=""
                                                            [ngClass]="{'is-invalid': isSubmitted && companyForm.get('masterCompanyList')?.invalid}">
                                                            <option value="">--select company Name--</option>
                                                            <option value=""
                                                                *ngFor="let CompanyName of MasterCompanyNames"
                                                                [value]="CompanyName.master_id">
                                                                {{CompanyName.master_company_name}}
                                                            </option>

                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-3 mb-3">
                                                    <label for="incDate">Incorporation Date <span
                                                            class="text-danger">*</span></label>
                                                    <div class="position-relative">
                                                        <input type="date" id="incDate" class="form-control"
                                                            [max]="today" formControlName="IncorporationDate"
                                                            [ngClass]="{'is-invalid': isSubmitted && companyForm.get('IncorporationDate')?.invalid}">
                                                        <div class="invalid-feedback"
                                                            *ngIf="isSubmitted && companyForm.get('IncorporationDate')?.errors?.['pattern']">
                                                            Date cannot be in the future.
                                                        </div>
                                                    </div>
                                                </div>


                                                <!-- Company Description -->
                                                <div class="col-md mb-3">
                                                    <label for="description">Company Description <span
                                                            class="text-danger">*</span></label>
                                                    <div class="position-relative">
                                                        <textarea id="description" class="form-control"
                                                            formControlName="companyDescription" rows="2"
                                                            placeholder="Enter Company Description"
                                                            [ngClass]="{'is-invalid': isSubmitted && companyForm.get('companyDescription')?.invalid}">
                                                        </textarea>
                                                        <div class="invalid-feedback"
                                                            *ngIf="isSubmitted && companyForm.get('companyDescription')?.errors?.['pattern']">
                                                            Only letters, numbers, commas, and spaces allowed.
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row m-0 p-0">
                                                <!-- <div class="col-md mb-3">
                                                    <label for="description">Address <span
                                                            class="text-danger">*</span></label>
                                                    <div class="position-relative">
                                                        <textarea id="description" class="form-control"
                                                            formControlName="companyDescription" rows="2"
                                                            placeholder="Enter Company Description"
                                                            [ngClass]="{'is-invalid': isSubmitted && companyForm.get('companyDescription')?.invalid}">
                                                        </textarea>
                                                        <div class="invalid-feedback"
                                                            *ngIf="isSubmitted && companyForm.get('companyDescription')?.errors?.['pattern']">
                                                            Only letters, numbers, commas, and spaces allowed.
                                                        </div>
                                                    </div>
                                                </div> -->

                                                <!-- Address (Fixed: unique formControlName) -->
                                                <div class="col-md mb-3">
                                                    <label for="address">Address <span
                                                            class="text-danger">*</span></label>
                                                    <div class="position-relative">
                                                        <textarea id="address" class="form-control"
                                                            formControlName="companyAddress" rows="2"
                                                            placeholder="Enter Address"
                                                            [ngClass]="{'is-invalid': isSubmitted && companyForm.get('companyAddress')?.invalid}">
                                                        </textarea>
                                                        <div class="invalid-feedback"
                                                            *ngIf="isSubmitted && companyForm.get('companyAddress')?.errors?.['pattern']">
                                                            Only letters, numbers, commas, and spaces allowed.
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>

                                            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                                <button type="submit"
                                                    class="btn btn-primary mt-3 ml-auto btn-end submit-btn">Submit</button>
                                            </div>
                                        </form>



                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>



                <div class="row row-cols-1  gx-4 gy-4 cardWrapper">
                    <div class="col-6 p-0  company_cards">
                        <div class="card p-3 row m-0 mx-3 shadow-sm border position-relative">
                            <div class="d-flex gap-3 mt-2 ">
                                <div class="">
                                    <img src="assets/img/logo_img.png" class="card-img-top mx-auto " alt="Company Logo">
                                </div>
                                <div class="">
                                    <h5 class="fw-bold">Hrishikesh</h5>
                                    <div class="d-flex gap-3 mt-2">
                                        <div class="location">
                                            <i class="bi bi-geo-alt me-2"></i>
                                            <span class="detailsText" style="color: #777777;">Pune</span>
                                        </div>
                                        <div class="date">
                                            <i class="bi bi-calendar me-2"></i>
                                            <span class="detailsText" style="color: #777777;">2022-01-01</span>
                                        </div>
                                        <div class="date">
                                            <span class="mark me-2"></span>
                                            <span class="detailsText" style="color: #777777;">Master</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 row m-0 p-0">
                                <div class="col-12">
                                    <h6 class="mb-0">Company Description</h6>
                                    <p class="text-muted small  m-0 truncate-line-clamp">Lorem ipsum dolor sit amet
                                        consectetur, adipisicing
                                        elit. Eum, et? Qui quas vero, impedit iusto quod tempora similique maxime iste
                                        beatae
                                        numquam ratione quasi quo assumenda fugiat suscipit aspernatur repellat.</p>
                                </div>
                            </div>

                            <!-- <h5 class="fw-regular">{{ company.CompanyName }}</h5> -->

                            <!-- <p class="text-muted small mt-2 mb-0">{{ company.CompanyDescription
                                }}</p> -->
                            <!-- <div class="d-flex justify-content-between small text-muted">
                                                <span>Location: {{ company.company_location }}</span>
                                            </div> -->
                            <!-- <button type="button" class="btn btn-primary mt-3 w-50">Select</button> -->
                            <div class="topBtn gap-2">
                                <button class="view-btn com-btn" data-bs-toggle="modal"
                                    data-bs-target="#EditCompanyDetails"><i class="bi bi-pencil"></i></button>
                                <button class="trash "><i class="bi bi-trash"></i></button>
                            </div>
                            <button (click)="redirect()" class="edit p-2 px-4 mt-2">View</button>

                        </div>
                    </div>
                    <div class="col  company_cards" *ngFor="let company of CompanyDetails">
                        <div class="card p-4 mx-3 shadow-sm border">
                            <img src="assets/img/logo_img.png" class="card-img-top mx-auto " alt="Company Logo">

                            <h5 class="fw-regular">{{ company.company_name }}</h5>
                            <p class="text-muted small mt-2 mb-0">{{ company.company_desc
                                }}</p>
                            <!-- <div class="d-flex justify-content-between small text-muted">
                                                <span>Location: {{ company.company_location }}</span>
                                            </div> -->
                            <!-- <button type="button" class="btn btn-primary mt-3 w-50">Select</button> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade modal-lg text-left" id="EditCompanyDetails" tabindex="-1" aria-labelledby="EditCompanyDetails">
    <div class="modal-dialog modal-xl  modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Edit Company</h5>
                <button type="button text-white" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-left">
                <!-- <div class="row">
                                                    <div class="col mb-3">
                                                        * Please Fill All Required Fields.
                                                    </div>
                                                </div> -->
                <form [formGroup]="EditcompanyForm">
                    <div class="row">

                        <!-- Company Name -->
                        <div class="col-md-6 mb-3">
                            <label for="companyName">Company Name <span class="text-danger">*</span></label>
                            <div class="position-relative">
                                <input type="text" id="companyName" class="form-control"
                                    formControlName="EditcompanyName" placeholder="Enter Company Name" [max]="today"
                                    [ngClass]="{'is-invalid': isSubmitted && companyForm.get('EditcompanyName')?.invalid}">
                                <div class="invalid-feedback"
                                    *ngIf="isSubmitted && companyForm.get('EditcompanyName')?.errors?.['pattern']">
                                    Cannot contain special characters or numbers.
                                </div>
                            </div>
                        </div>

                        <!-- Company Logo -->
                        <div class="col-md-3 mb-3">
                            <label for="companyLogo">Company Logo <span class="text-danger">*</span></label>
                            <div class="position-relative">
                                <input type="file" class="form-control" id="companyLogo"
                                    (change)="onFileSelected($event)" accept="image/*"
                                    [ngClass]="{'is-invalid': isSubmitted && !selectedLogoFile}">
                                <div class="invalid-feedback" *ngIf="isSubmitted && !selectedLogoFile">
                                    Company Logo is required.
                                </div>
                            </div>
                        </div>
                        <div class="col-md mb-3">
                            <label for="incDate">Master Company ? <span class="text-danger">*</span></label>
                            <div class="position-relative d-flex gap-4">
                                <div class="d-flex align-items-center gap-1">
                                    <input type="radio" id="html" name="fav_language" value="yes"
                                        formControlName="radioChoice">
                                      <label for="html" class="m-0">Yes</label>
                                </div>
                                <div class="d-flex align-items-center gap-1">
                                      <input type="radio" id="css" name="fav_language" value="no"
                                        formControlName="radioChoice">
                                      <label for="css" class="m-0">No</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row my-3">

                        <!-- Incorporation Date -->
                        <div class="col-md-4 mb-3">
                            <label for="incDate">Master Company List <span class="text-danger">*</span></label>
                            <div class="position-relative">
                                <select name="" formControlName="EditmasterCompanyList" class="form-control" id=""
                                    [ngClass]="{'is-invalid': isSubmitted && companyForm.get('EditmasterCompanyList')?.invalid}">
                                    <option value="">--select company Name--</option>
                                    <option value="" *ngFor="let CompanyName of CompanyNameList">
                                        {{CompanyName.name}}
                                    </option>

                                </select>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="incDate">Incorporation Date <span class="text-danger">*</span></label>
                            <div class="position-relative">
                                <input type="date" id="incDate" class="form-control" [max]="today"
                                    formControlName="EditIncorporationDate"
                                    [ngClass]="{'is-invalid': isSubmitted && companyForm.get('EditIncorporationDate')?.invalid}">
                                <div class="invalid-feedback"
                                    *ngIf="isSubmitted && companyForm.get('EditIncorporationDate')?.errors?.['pattern']">
                                    Date cannot be in the future.
                                </div>
                            </div>
                        </div>


                        <!-- Company Description -->
                        <div class="col-md mb-3">
                            <label for="description">Company Description <span class="text-danger">*</span></label>
                            <div class="position-relative">
                                <textarea id="description" class="form-control" formControlName="EditcompanyDescription"
                                    rows="2" placeholder="Enter Company Description"
                                    [ngClass]="{'is-invalid': isSubmitted && companyForm.get('EditcompanyDescription')?.invalid}">
                                </textarea>
                                <div class="invalid-feedback"
                                    *ngIf="isSubmitted && companyForm.get('EditcompanyDescription')?.errors?.['pattern']">
                                    Only letters, numbers, commas, and spaces allowed.
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row m-0 p-0">
                        <div class="col-md mb-3">
                            <label for="description">Address <span class="text-danger">*</span></label>
                            <div class="position-relative">
                                <textarea id="description" class="form-control" formControlName="EditcompanyAddress"
                                    rows="2" placeholder="Enter Company Description"
                                    [ngClass]="{'is-invalid': isSubmitted && companyForm.get('EditcompanyAddress')?.invalid}">
                                </textarea>
                                <div class="invalid-feedback"
                                    *ngIf="isSubmitted && companyForm.get('EditcompanyAddress')?.errors?.['pattern']">
                                    Only letters, numbers, commas, and spaces allowed.
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <button type="submit" class="btn btn-primary mt-3 ml-auto btn-end submit-btn">Submit</button>
                    </div>
                </form>



            </div>

        </div>
    </div>
</div>